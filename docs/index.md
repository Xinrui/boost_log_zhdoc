# Introduction

## Motivation
今天的应用程序增长迅速，变得复杂且难以测试和调试。大多数情况下，应用程序运行在远程站点，开发者很少有机会监控其执行过程，并在出现故障时找出其原因。此外，即使在本地调试时，如果应用程序的行为严重依赖于异步事件（如设备反馈或其他进程的活动），调试也可能变得困难。

在这种情况下，日志记录可以派上用场。应用程序将其执行的所有关键信息存储在日志中，当出现问题时，可以利用这些信息来分析程序行为并做出必要的修正。日志记录还有其他非常有用的应用，例如收集统计信息和突出显示事件（即指示某种情况已发生或应用程序遇到了一些问题）。这些任务对于许多实际工业应用至关重要。

该库旨在让应用程序开发者更轻松地进行日志记录。它提供了广泛的开箱即用的工具，并具有扩展库的公共接口。该库的主要目标是：

1. 简单性：一个简短的示例代码片段就足以让用户掌握库的使用，并准备使用其基本功能。
2. 可扩展性：用户应能够扩展库的功能，以便收集和存储日志信息。
3. 性能：该库应尽可能对用户应用程序的性能产生最小的影响。

## How to read the documentation
该文档面向新手和有经验的库用户。然而，用户应熟悉常用的 Boost 组件，例如 `shared_ptr`、`make_shared`（参见 [Boost.SmartPtr](https://www.boost.org/doc/libs/release/libs/smart_ptr/doc/html/smart_ptr.html)）以及 `function`（[Boost.Function](https://www.boost.org/doc/libs/release/doc/html/function.html)）。在必要时，文档的某些部分会引用其他 Boost 库。

如果这是您第一次接触该库，建议先阅读[设计概述](./design_overview.md/#design-overview)部分，以初步了解库的功能和架构。[安装](./installation_and_compatibility.md#installation-and-compatibility)和[教程](./tutorial/tutorial.md#tutorial)部分将帮助您开始尝试使用该库。教程通过示例代码片段概述了库的功能。部分教程步骤以两种形式呈现：简单版和高级版。简单版通常描述完成任务的最常用且最简单的方法，建议新用户先阅读该部分。高级版通常提供完成同一任务的扩展方式，并伴随深入的解释和额外的自定义功能。这一部分对于有经验的用户非常有用，通常在简单方法不能满足需求时阅读。

除了教程外，还有[详细功能描述](./detailed_features_description/detailed_features_description.md#detailed-features-description)章节。该部分描述了教程中未涉及的其他工具，建议根据具体需求阅读此章节。

最后是[参考](./reference/reference.md#reference)部分，提供了库组件接口的正式描述。

为简化文档中的代码片段，假设已定义以下命名空间别名：

```cpp
namespace logging = boost::log;
namespace sinks = boost::log::sinks;
namespace src = boost::log::sources;
namespace expr = boost::log::expressions;
namespace attrs = boost::log::attributes;
namespace keywords = boost::log::keywords;
```

请注意，大多数示例之后会附有一个链接，指向完整的可编译代码示例，包含所有必要的 `include` 文件以及辅助代码（如果有的话），这些内容在文档中为简洁起见被省略了。相关的 `include` 文件也会列在各节的开头。

## Definitions
以下是一些将在整个文档中广泛使用的术语定义：

- **日志记录（Log record）**  
  从用户的应用程序中收集的一捆信息，可能会被写入日志文件。在简单的情况下，日志记录在被日志库处理后，会以日志文件中的一行文本表示。

- **属性（Attribute）**  
  "属性" 是一种可以用来专门化日志记录的元信息。在 Boost.Log 中，属性由具有特定接口的函数对象表示，当被调用时返回实际的属性值。属性的例子包括返回当前时间的函数、返回递增日志记录计数器的函数等。

- **属性值（Attribute value）**  
  属性值是从属性中获取的实际数据，这些数据附加到特定的日志记录中并由库处理。属性值可以具有不同类型（整数、字符串和更复杂的类型，包括用户自定义类型）。属性值的例子包括当前时间戳、文件名、行号、当前作用域名等。属性值封装在类型擦除的包装器中，因此在接口中看不到实际的类型。属性值的实际类型有时称为存储类型。

- **（属性）值访问（Attribute value visitation）**  
  处理属性值的一种方式。这种方法涉及一个函数对象（访问者），它被应用于属性值。访问者应知道属性值的存储类型以进行处理。

- **（属性）值提取（Attribute value extraction）**  
  处理属性值的一种方式，调用者试图获得存储值的引用。调用者应知道属性值的存储类型以便能够提取它。

- **日志源（Log source）**  
  用户应用程序将日志记录输入的入口。简单情况下，它是一个对象（记录器），维护一组属性，这些属性将在用户请求时用于形成日志记录。当然，也可以创建一个在某些事件上发出日志记录的源（例如，通过拦截和解析另一个应用程序的控制台输出）。

- **日志汇（Log sink）**  
  收集来自用户应用程序的日志记录并将其存储或处理的目标。汇点定义日志记录将被存储或处理的方式和位置。

- **日志过滤器（Log filter）**  
  接收一个日志记录并判断该记录是否应该通过进行进一步处理或丢弃的谓词。过滤器通常基于附加到记录的属性值来做出决策。

- **日志格式化器（Log formatter）**  
  生成日志记录最终文本输出的函数对象。一些汇点（例如二进制日志汇点）可能不需要它，但几乎所有基于文本的汇点都会使用格式化器来组成其输出。

- **日志核心（Logging core）**  
  一个全局实体，维护汇点列表并将过滤器应用于日志源生成的记录。在用户的应用程序中，主要在配置日志库时使用。一个应用程序中只有一个日志核心实例。

- **i18n（国际化）**  
  操作宽字符的能力。

- **TLS（线程局部存储）**  
  为每个访问线程提供独立变量值的概念。

- **RTTI（运行时类型信息）**  
  这是 C++ 语言中为 `dynamic_cast` 和 `typeid` 运算符正常工作所需的数据结构支持。